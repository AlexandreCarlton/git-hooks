# git-hooks
A personal set of [git hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)
to automate mundane tasks.

## Setting up

### Post Git 2.9
If you are using [Git 2.9](https://github.com/git/git/blob/master/Documentation/RelNotes/2.9.0.txt)
you can clone this repository, set your `core.hooksPath` variable and you'll be
good to go:

```bash
mkdir --parents "${HOME}/.config/git"
git config --global core.hooksPath "${HOME}/.config/git/hooks"
git clone https://github.com/AlexandreCarlton/git-hooks.git "${HOME}/.config/git/hooks"
```

### Pre Git 2.9
If you aren't using a new enough version of Git, you'll have to clone this
repository into your templates directory, which will be copied into every git
repository you create. The downside of this is that you will have to manually
update each repository's hooks when you update this one.

```bash
mkdir --parents "${HOME}/.config/git/templates"
git config --global init.templatedir "${HOME}/.config/git/templates"
git clone https://github.com/AlexandreCarlton/git-hooks.git "${HOME}/.config/git/templates/hooks"
```

If you would like to use these hooks in existing repositories, you will have to
call `git init` in every single one, which will copy the template directory
across into each `.git` folder.

## Scripts

These are called by our git hooks.

### clean-python-bytecode-files
Deletes any `.pyc`, `.pyo` and `__pycache__` files found in the project to
force recompilation of `.py` files on a checkout.

### create-tags-file
"Adapted" from [Effortless Ctags with Git](https://tbaggery.com/2011/08/08/effortless-ctags-with-git.html),
this script will create a tags file from all tracked files in the repository.

### insert-jira-ticket
Attempts to determine the ticket number of a [JIRA issue](https://confluence.atlassian.com/jira064/what-is-an-issue-720416138.html)
from the current branch name ([generated by Bitbucket Server](https://confluence.atlassian.com/bitbucketserver/using-branches-in-bitbucket-server-776639968.html#UsingbranchesinBitbucketServer-Creatingbranches))
and append it to the commit message before editing.

The line inserted will be similar to:
```
References TIS-72
```

### spell-check-commit-message
Analyses the commit message once we have made a commit, and print out any
misspelt words to `stderr`. Use `git commit --amend` to fix the message.

### link-ycm-extra-conf
Creates a symbolic link `.ycm_extra_conf.py` to the one in this repository
should there exist a `CMakeLists.txt` file in the project's root.

This configuration file is optimised to analyse the `compile_commands.json`
generated in the `build` folder of the project.
